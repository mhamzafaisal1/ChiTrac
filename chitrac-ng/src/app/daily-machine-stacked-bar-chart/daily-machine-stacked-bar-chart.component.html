<div class="chart-container" [class.dark-mode]="isDarkTheme">
  <div class="controls">
    <app-date-time-picker
      label="Start Time"
      [(value)]="startTime">
    </app-date-time-picker>
    <app-date-time-picker
      label="End Time"
      [(value)]="endTime">
    </app-date-time-picker>

    <div class="button-group">
      <button mat-flat-button color="primary" (click)="fetchData()" [disabled]="!startTime || !endTime">
        Fetch Data
      </button>
    </div>
  </div>

  <div class="chart-content">
    <div *ngIf="loading" class="loading">
      Loading...
    </div>
    
    <div *ngIf="error" class="error">
      {{ error }}
    </div>

    <app-stacked-bar-chart
      *ngIf="chartData && !loading && !error"
      [data]="chartData"
      mode="machine">
    </app-stacked-bar-chart>
  </div>
</div>
